# 						Real-Time Render 4th

## 1.介绍

### 数学定义

​	**向量**：
$$
\vec v=
\begin{gather*}
\begin{pmatrix}
v_x \\v_y \\v_z\\v_w
\end{pmatrix}
\end{gather*}
$$
​	

|            类型            |                           注意事项                           |                             例子                             |
| :------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|        角度(angle)         |                         小写希腊字母                         |          $$\alpha_i,\eta,\beta,\theta,\gamma_{60}$$          |
|        因子(scalar)        | 小写英文字母*<kbd><font color=#0099ff size=4>斜体</font></kbd>* |                    *$$a,b,c,u_k,w_{ij}$$*                    |
| 向量或点(vector or point)  |     小写英文字母<kbd><font size=4>**粗体**</font></kbd>      | $$\textbf{a},\textbf{u},\textbf{v}_s,\textbf{h}(\rho),\textbf{h}_z$$ |
|        矩阵(matrix)        |         大写<kbd><font size=4>**粗体**</font></kbd>          |   $$\textbf{T}(\textbf{t}),\textbf{X},\textbf{R}_x(\rho)$$   |
|        平面(plane)         |            $\pi$:法向量点乘平面内任意向量加上因子            | $$\pi:\textbf{n}\cdot\textbf{x}+d=0\\\pi_1:\textbf{n}_1\cdot\textbf{x}+d_1=0\\$$ |
|      三角形(triangle)      |                           △和3个点                           | $$\triangle{\textbf{v}_0\textbf{v}_1\textbf{v}_2},\triangle\textbf{cba}$$ |
|     线段(line segment)     |                            两个点                            |           $$\textbf{uv},\textbf{a}_i\textbf{b}_j$$           |
| 几何物体(geometric entity) |    大写*<kbd><font color=#0099f size=4>斜体</font></kbd>*    |                   *$$A_{OBB},T,B_{AABB}$$*                   |

大写，小写

希腊字母，英文字母

粗体，非粗体

斜体，非斜体

|      |                            运算符                            |    描述    |
| :--: | :----------------------------------------------------------: | :--------: |
|  1   |                          $$\cdot$$                           |    点乘    |
|  2   |                          $$\times$$                          |    叉乘    |
|  3   |                       $$\textbf{v}^T$$                       | 向量的转置 |
|  4   |                           $$\bot$$                           |            |
|  5   |               $$\lvert\quad\cdot\quad\rvert$$                |            |
|  6   |               $$\lvert\quad\cdot\quad\rvert$$                |            |
|  7   |               $$\lVert\quad\cdot\quad\rVert$$                |            |
|  8   |                          $$x^{+}$$                           |            |
|  9   |                         $$x^{\mp}$$                          |            |
|  10  |                            $$n!$$                            |            |
|  11  | $$\begin{gather*}\begin{pmatrix}n\\k\end{pmatrix}\end{gather*}$$ |            |


$$
x^{+}=

\begin{cases}
x,&x>0\\
0,&otherwise
\end{cases}
$$

$$
x^{\mp}=
\begin{cases}
1,\qquad if&x\geq1,\\
x,\qquad if&0<x<1,\\
0,&otherwise.
\end{cases}
$$



$$
n!=n(n-1)(n-2)\cdot\cdot\cdot3\cdot2\cdot1
$$


$$
\begin{gather*}\begin{pmatrix}n\\k\end{pmatrix}\end{gather*}=
\frac{n!}{k!(n-k!)!}
$$


|      |      函数      | 描述 |
| :--: | :------------: | :--: |
|  1   | $$atan2(y,x)$$ |      |
|  2   |   $$log(n)$$   |      |
















## 2.渲染管线

​		本章介绍了实时图形的核心组件，即图形渲染管道，也简称为“管道”。管道的主要功能是在给定虚拟摄像机的情况下生成或渲染二维图像，三维物体，光源等。因此，渲染管道是实时渲染的基础工具。使用管道的过程如图2.1所示。图像中对象的位置和形状由其几何形状，环境特征以及相机在该环境中的位置决定。对象的外观受材料属性，光源，纹理（应用于表面的图像）和着色方程的影响。

![1568991361207](C:\Users\tionerter\AppData\Roaming\Typora\typora-user-images\1568991361207.png)

​		<font size=2>图2.1。在左图中，虚拟摄像机位于金字塔的顶端（四条线会聚的点）。仅渲染视图体积内的基元。对于以透视方式呈现的图像（如这里的情况），视图体积是平截头体，即一个头部被截取的棱椎。右图显示了相机“看到的内容”。请注意，左图中的红色圆环形状不在右侧渲染中，因为它位于视锥体外。此外，左图像中的扭曲蓝色棱镜被夹在平截头体的顶平面上。</font>

​		我们将解释渲染管道的不同阶段，重点是功能而不是实现。应用这些阶段的相关细节将在后面的章节中介绍。

### 2.1结构

​		在物理世界中，管道概念以许多不同的形式表现出来，从工厂装配线到快餐厨房。它也适用于图形渲染。管道由若干阶段组成，每个阶段执行庞大任务的一部分。

​		流水线的每个阶段是并行执行的，每个阶段取决于前一阶段的结果。理想情况下，一个非流水线系统被划分成n个流水线阶段，可以带来n倍的速度提升。性能的提高是使用流水线操作的主要原因。例如，一堆数量庞大的三明治可以被一些分工好的工人快速准备好 —— 一个准备面包，另一个添加肉，另一个添加配料。每个人都将自己的结果传递给下一个人，并立即开始下一个三明治的工作。如果每个人花费20秒来执行他们的任务，则每20秒，每分钟三次，最大速率可以生产一个三明治。尽管流水线是并行执行的，但它们会被拖延直到最慢的阶段完成其任务。例如，假设肉类添加阶段变得更加复杂，需要30秒。现在最好的速度是一分钟两个三明治。在这个特殊的流水线，肉类阶段是瓶颈，因为它决定了整个生产的速度。于是配料阶段在等待肉类阶段的完成时处于饥饿状态（对于顾客也是）。

​		这种管道结构也可以在实时计算机图形的背景下找到。将实时渲染管线粗略划分为四个主要阶段 - **应用，几何处理，光栅化和像素处理** - 如图2.2所示。这种结构是渲染管线的核心在实时计算机图形应用程序中，因此是后续章节中讨论的重要基础。这些阶段通常又是一个管线，这意味着它由几个子阶段组成。我们区分这里显示的功能阶段和它们的实现结构。功能阶段有明确的任务要执行，但没有指定任务在管线中执行的方式。给定的实现可以将两个功能阶段组合成一个单元或者执行使用可编程核心，同时将另一个更耗时的功能阶段划分为多个硬件单元。

![1568994209724](C:\Users\tionerter\AppData\Roaming\Typora\typora-user-images\1568994209724.png)

<font size=2>		图2.2。渲染管道的基本构造，包括四个阶段：应用程序，几何处理，光栅化和像素处理。这些阶段中的每一个本身可以是管线，如几何处理阶段下面所示，或者阶段可以（部分）并行化，如像素处理阶段所示。在此图示中，应用程序阶段是单个进程，但此阶段也可以是流水线或并行化的。注意，光栅化找到图元内的像素，例如三角形。</font>

渲染速度可以以每秒帧数（FPS）表示，即每秒渲染的图像的数量。它也可以用赫兹（Hz）表示，它只是1 /秒的符号，即更新的频率。通常以毫秒（ms）表示渲染图像所需的时间。生成图像的时间通常会有所不同，具体取决于每帧期间执行的计算的复杂程度。每秒帧数用于表示特定帧的速率，或表示某个使用持续时间内的平均性能。赫兹用于硬件，例如显示器，其能被设置为固定速率。



## 3.GPU

## 4.变换

## 5.着色基础

## 6.纹理

## 7.阴影

## 8.光和颜色

## 9.基于物理的着色

## 10.局部光照

## 11.全局光照

## 12.图像空间特效

## 13.超越多边形

## 14.体积和半透明渲染

## 15.非真实图像渲染

## 17.曲线和曲面

## 18管线优化

## 19.加速算法

## 20.高效着色

## 21.虚拟现实和增强现实

## 22.交叉测试方法

## 23.图形硬件



